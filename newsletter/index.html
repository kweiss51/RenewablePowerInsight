<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newsletter Subscription - Renewable Power Insight</title>
    <meta name="description" content="Subscribe to our weekly newsletter and stay updated with the latest renewable energy news, research, and industry insights.">
    
    <!-- External Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- External CSS -->
    <link rel="stylesheet" href="../style.css">

<!-- RenewablePowerInsight Analytics -->
<script>
(function() {
    // Analytics configuration
    const ANALYTICS_CONFIG = {
        apiEndpoint: '/api/analytics', // Update this to your analytics endpoint
        trackPageViews: true,
        trackSessions: true,
        trackEvents: true,
        trackConversions: true
    };
    
    // Session tracking
    let sessionId = sessionStorage.getItem('rpi_session_id');
    if (!sessionId) {
        sessionId = 'session_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now();
        sessionStorage.setItem('rpi_session_id', sessionId);
        sessionStorage.setItem('rpi_session_start', new Date().toISOString());
        sessionStorage.setItem('rpi_is_new_user', !localStorage.getItem('rpi_returning_user') ? 'true' : 'false');
        localStorage.setItem('rpi_returning_user', 'true');
    }
    
    // User identification
    let userId = localStorage.getItem('rpi_user_id');
    if (!userId) {
        userId = 'user_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now();
        localStorage.setItem('rpi_user_id', userId);
    }
    
    // Device detection
    function getDeviceType() {
        const userAgent = navigator.userAgent;
        if (/tablet|ipad|playbook|silk/i.test(userAgent)) return 'tablet';
        if (/mobile|iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(userAgent)) return 'mobile';
        return 'desktop';
    }
    
    // Traffic source detection
    function getTrafficSource() {
        const referrer = document.referrer;
        const utm_source = new URLSearchParams(window.location.search).get('utm_source');
        
        if (utm_source) return utm_source;
        if (!referrer) return 'direct';
        
        const hostname = new URL(referrer).hostname;
        if (hostname.includes('google')) return 'google';
        if (hostname.includes('facebook')) return 'facebook';
        if (hostname.includes('twitter')) return 'twitter';
        if (hostname.includes('linkedin')) return 'linkedin';
        if (hostname.includes('youtube')) return 'youtube';
        
        return 'referral';
    }
    
    // Page tracking
    function trackPageView() {
        if (!ANALYTICS_CONFIG.trackPageViews) return;
        
        const pageData = {
            event_type: 'page_view',
            session_id: sessionId,
            user_id: userId,
            page_url: window.location.href,
            page_title: document.title,
            referrer: document.referrer,
            user_agent: navigator.userAgent,
            device_type: getDeviceType(),
            traffic_source: getTrafficSource(),
            timestamp: new Date().toISOString()
        };
        
        // Send to analytics endpoint
        sendAnalytics(pageData);
    }
    
    // Session tracking
    function trackSession() {
        if (!ANALYTICS_CONFIG.trackSessions) return;
        
        const sessionData = {
            event_type: 'session_start',
            session_id: sessionId,
            user_id: userId,
            is_new_user: sessionStorage.getItem('rpi_is_new_user') === 'true',
            device_type: getDeviceType(),
            traffic_source: getTrafficSource(),
            landing_page: window.location.href,
            start_time: sessionStorage.getItem('rpi_session_start'),
            user_agent: navigator.userAgent
        };
        
        sendAnalytics(sessionData);
    }
    
    // Event tracking
    function trackEvent(eventType, properties = {}) {
        if (!ANALYTICS_CONFIG.trackEvents) return;
        
        const eventData = {
            event_type: 'custom_event',
            session_id: sessionId,
            user_id: userId,
            event_name: eventType,
            properties: properties,
            page_url: window.location.href,
            timestamp: new Date().toISOString()
        };
        
        sendAnalytics(eventData);
    }
    
    // Conversion tracking
    function trackConversion(conversionType, value = 0, currency = 'USD') {
        if (!ANALYTICS_CONFIG.trackConversions) return;
        
        const conversionData = {
            event_type: 'conversion',
            session_id: sessionId,
            user_id: userId,
            conversion_type: conversionType,
            value: value,
            currency: currency,
            page_url: window.location.href,
            timestamp: new Date().toISOString()
        };
        
        sendAnalytics(conversionData);
    }
    
    // Send data to analytics endpoint
    function sendAnalytics(data) {
        // For now, log to console (replace with actual API call)
        console.log('RPI Analytics:', data);
        
        // Uncomment when you have an analytics endpoint:
        /*
        fetch(ANALYTICS_CONFIG.apiEndpoint, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        }).catch(error => {
            console.warn('Analytics tracking failed:', error);
        });
        */
    }
    
    // Initialize tracking when page loads
    function initAnalytics() {
        // Track page view
        trackPageView();
        
        // Track session if it's a new session
        if (!sessionStorage.getItem('rpi_session_tracked')) {
            trackSession();
            sessionStorage.setItem('rpi_session_tracked', 'true');
        }
        
        // Track time on page
        let pageLoadTime = Date.now();
        let lastActivityTime = Date.now();
        
        // Update last activity on user interaction
        ['click', 'scroll', 'keypress', 'mousemove'].forEach(event => {
            document.addEventListener(event, () => {
                lastActivityTime = Date.now();
            }, { passive: true });
        });
        
        // Track page exit
        window.addEventListener('beforeunload', () => {
            const timeOnPage = (lastActivityTime - pageLoadTime) / 1000;
            
            const exitData = {
                event_type: 'page_exit',
                session_id: sessionId,
                user_id: userId,
                page_url: window.location.href,
                time_on_page: timeOnPage,
                timestamp: new Date().toISOString()
            };
            
            // Use sendBeacon for reliable exit tracking
            if (navigator.sendBeacon && ANALYTICS_CONFIG.apiEndpoint !== '/api/analytics') {
                navigator.sendBeacon(
                    ANALYTICS_CONFIG.apiEndpoint,
                    JSON.stringify(exitData)
                );
            }
        });
        
        // Auto-track common events
        document.addEventListener('click', (e) => {
            const target = e.target;
            
            // Track link clicks
            if (target.tagName === 'A') {
                trackEvent('link_click', {
                    link_text: target.textContent,
                    link_url: target.href,
                    link_target: target.target
                });
            }
            
            // Track button clicks
            if (target.tagName === 'BUTTON' || target.type === 'submit') {
                trackEvent('button_click', {
                    button_text: target.textContent,
                    button_type: target.type
                });
            }
        });
        
        // Track scroll depth
        let maxScroll = 0;
        let scrollTracked = {};
        
        window.addEventListener('scroll', () => {
            const scrollPercent = Math.round(
                (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100
            );
            
            if (scrollPercent > maxScroll) {
                maxScroll = scrollPercent;
                
                // Track scroll milestones
                [25, 50, 75, 90].forEach(milestone => {
                    if (scrollPercent >= milestone && !scrollTracked[milestone]) {
                        scrollTracked[milestone] = true;
                        trackEvent('scroll_depth', {
                            depth_percent: milestone
                        });
                    }
                });
            }
        });
    }
    
    // Expose tracking functions globally
    window.rpiAnalytics = {
        trackEvent,
        trackConversion,
        getSessionId: () => sessionId,
        getUserId: () => userId
    };
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initAnalytics);
    } else {
        initAnalytics();
    }
})();
</script>
<!-- End RenewablePowerInsight Analytics -->

</head>
<body>
    <!-- Header -->
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <div class="header-brand">
                    <a href="../index.html" class="site-title">Renewable Power Insight</a>
                    <span class="site-tagline">Advanced Energy Research</span>
                </div>
                <nav class="main-nav" aria-label="Main navigation">
                    <a href="../index.html" class="nav-link">Home</a>
                    <a href="../posts/solar/index.html" class="nav-link">Solar</a>
                    <a href="../posts/wind/index.html" class="nav-link">Wind</a>
                    <a href="../posts/battery/index.html" class="nav-link">Storage</a>
                    <a href="../posts/grid-tech/index.html" class="nav-link">Smart Grid</a>
                    <a href="../posts/policy/index.html" class="nav-link">Policy</a>
                    <a href="../blog/index.html" class="nav-link">All Posts</a>
                </nav>
                <button class="mobile-menu-button" aria-label="Open mobile menu" aria-expanded="false">
                    ☰
                </button>
            </div>
        </div>
    </header>
    
    <!-- Breadcrumb Navigation -->
    <nav class="breadcrumb-nav" aria-label="Breadcrumb">
        <div class="container">
            <ol class="breadcrumb-list">
                <li class="breadcrumb-item">
                    <a href="../index.html">Home</a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">
                    Newsletter
                </li>
            </ol>
        </div>
    </nav>
    
    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="newsletter-page">
                <div class="newsletter-header">
                    <h1 class="page-title">Stay Updated with Renewable Energy Insights</h1>
                    <p class="page-subtitle">
                        Subscribe to our weekly newsletter and receive the three most important 
                        renewable energy stories directly in your inbox.
                    </p>
                </div>
                
                <div class="newsletter-content">
                    <div class="newsletter-form-section">
                        <div class="form-container">
                            <h2>Weekly Energy Digest</h2>
                            <p>Get the latest renewable energy news, research findings, and market insights delivered every week.</p>
                            
                            <form class="newsletter-form" id="newsletterForm">
                                <div class="form-group">
                                    <label for="email">Email Address</label>
                                    <input type="email" id="email" name="email" required placeholder="your.email@example.com">
                                </div>
                                
                                <div class="form-group">
                                    <label for="name">First Name (Optional)</label>
                                    <input type="text" id="name" name="name" placeholder="Your name">
                                </div>
                                
                                <div class="form-group">
                                    <label>Interests (Select all that apply)</label>
                                    <div class="checkbox-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="interests" value="solar">
                                            <span>Solar Energy</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="interests" value="wind">
                                            <span>Wind Power</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="interests" value="storage">
                                            <span>Energy Storage</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="interests" value="grid">
                                            <span>Smart Grid</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="interests" value="policy">
                                            <span>Policy & Markets</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <button type="submit" class="subscribe-button">Subscribe to Newsletter</button>
                                
                                <p class="privacy-note">
                                    We respect your privacy. Unsubscribe at any time. 
                                    We'll never share your email address.
                                </p>
                            </form>
                            
                            <div class="success-message" id="successMessage" style="display: none;">
                                <h3>Thank you for subscribing!</h3>
                                <p>You'll receive your first newsletter within the next week.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="newsletter-benefits">
                        <h2>What You'll Receive</h2>
                        
                        <div class="benefit-item">
                            <h3>📧 Weekly Digest</h3>
                            <p>Every week, we curate the three most significant renewable energy stories and developments.</p>
                        </div>
                        
                        <div class="benefit-item">
                            <h3>🔬 Research Highlights</h3>
                            <p>Key findings from the latest research papers, technology breakthroughs, and market analysis.</p>
                        </div>
                        
                        <div class="benefit-item">
                            <h3>💡 Industry Insights</h3>
                            <p>Expert commentary on policy changes, market trends, and investment opportunities.</p>
                        </div>
                        
                        <div class="benefit-item">
                            <h3>📊 Market Updates</h3>
                            <p>Essential data on capacity additions, pricing trends, and technology adoption rates.</p>
                        </div>
                        
                        <div class="benefit-item">
                            <h3>🌍 Global Perspective</h3>
                            <p>Coverage of renewable energy developments from around the world.</p>
                        </div>
                        
                        <div class="sample-newsletter">
                            <h3>Sample Newsletter Content</h3>
                            <div class="sample-content">
                                <h4>This Week in Renewable Energy</h4>
                                <ul>
                                    <li><strong>Solar:</strong> New perovskite solar cell efficiency record breaks 26% barrier</li>
                                    <li><strong>Wind:</strong> Offshore wind capacity additions reach 10 GW globally in Q3</li>
                                    <li><strong>Storage:</strong> Grid-scale battery costs drop 15% year-over-year</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Footer -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Research Areas</h3>
                    <ul class="footer-links">
                        <li><a href="../posts/solar/index.html">Solar Technology</a></li>
                        <li><a href="../posts/wind/index.html">Wind Energy</a></li>
                        <li><a href="../posts/battery/index.html">Energy Storage</a></li>
                        <li><a href="../posts/grid-tech/index.html">Smart Grid</a></li>
                        <li><a href="../posts/policy/index.html">Policy Analysis</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Resources</h3>
                    <ul class="footer-links">
                        <li><a href="../blog/index.html">All Articles</a></li>
                        <li><a href="../research/index.html">Research Reports</a></li>
                        <li><a href="../data/index.html">Market Data</a></li>
                        <li><a href="../insights/index.html">Industry Insights</a></li>
                        <li><a href="../methodology/index.html">Methodology</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Company</h3>
                    <ul class="footer-links">
                        <li><a href="../about/index.html">About Us</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Connect</h3>
                    <ul class="footer-links">
                        <li><a href="../newsletter/index.html">Newsletter</a></li>
                        <li><a href="../rss/index.html">RSS Feed</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Renewable Power Insight. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <style>
        .newsletter-page {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 0;
        }
        
        .newsletter-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .page-title {
            font-size: 3rem;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 1rem;
        }
        
        .page-subtitle {
            font-size: 1.2rem;
            color: var(--color-text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }
        
        .newsletter-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: start;
        }
        
        .form-container {
            background: var(--color-background-secondary);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .form-container h2 {
            color: var(--color-primary);
            margin-bottom: 1rem;
        }
        
        .newsletter-form {
            margin-top: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--color-text);
        }
        
        .form-group input[type="email"],
        .form-group input[type="text"] {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--color-border);
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus {
            border-color: var(--color-primary);
            outline: none;
        }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            font-weight: normal;
            margin-bottom: 0;
        }
        
        .checkbox-label input[type="checkbox"] {
            margin-right: 0.5rem;
        }
        
        .subscribe-button {
            width: 100%;
            background: var(--color-primary);
            color: white;
            padding: 1rem;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .subscribe-button:hover {
            background: var(--color-primary-hover);
        }
        
        .privacy-note {
            font-size: 0.9rem;
            color: var(--color-text-secondary);
            text-align: center;
            margin-top: 1rem;
        }
        
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 1rem;
            border-radius: 6px;
            text-align: center;
        }
        
        .newsletter-benefits h2 {
            color: var(--color-primary);
            margin-bottom: 2rem;
        }
        
        .benefit-item {
            margin-bottom: 2rem;
        }
        
        .benefit-item h3 {
            margin-bottom: 0.5rem;
            color: var(--color-text);
        }
        
        .sample-newsletter {
            background: var(--color-background-secondary);
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 2rem;
        }
        
        .sample-newsletter h3 {
            color: var(--color-primary);
            margin-bottom: 1rem;
        }
        
        .sample-content h4 {
            margin-bottom: 0.5rem;
        }
        
        .sample-content ul {
            list-style: none;
            padding: 0;
        }
        
        .sample-content li {
            padding: 0.25rem 0;
            border-bottom: 1px solid var(--color-border);
        }
        
        @media (max-width: 768px) {
            .newsletter-content {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .page-title {
                font-size: 2.5rem;
            }
            
            .checkbox-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
    
    <script>
        document.getElementById('newsletterForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Simulate form submission
            const form = e.target;
            const successMessage = document.getElementById('successMessage');
            
            // Hide form and show success message
            form.style.display = 'none';
            successMessage.style.display = 'block';
            
            // In a real implementation, you would send the data to your backend
            console.log('Newsletter subscription submitted');
        });
    </script>
</body>
</html>
